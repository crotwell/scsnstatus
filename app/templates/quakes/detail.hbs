

{{#leaflet-map lat=model.quake.latitude lng=model.quake.longitude zoom=7 class="quakemap" }}
  {{tile-layer url="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"}}

  {{#each model.stationList as |s|}}
  {{#marker-layer lat=s.latitude lng=s.longitude class='stationMarker' }}
    {{#popup-layer}}
      <h3>Station: {{#link-to 'stations.show' s.id }}{{s.codes }} {{s.latitude}} {{s.longitude}}{{/link-to}}</h3>
    {{/popup-layer}}
  {{/marker-layer}}
{{/each}}

{{#let model.quake as |q|}}
  {{#circle-marker-layer lat=q.latitude lng=q.longitude radius=q.scaledMag }}
    {{#popup-layer}}
      <h3>Event: {{#link-to 'quakes.detail' q }}{{moment-format q.time }} {{q.quake.prefMagnitude.magFormatted}} {{q.quake.prefMagnitude.magType}}{{/link-to}}</h3>
    {{/popup-layer}}
  {{/circle-marker-layer}}
{{/let}}
{{/leaflet-map}}


{{#let model.quake as |q|}}
<table>
  <tr>
    <th>EventId</th>
    <td>{{q.eventid}}</td>
  </tr>
  <tr>
    <th>Time</th>
    <td>{{moment-format q.time }}</td>
  </tr>
  <tr>
    <th>Latitude/Longitude</th>
    <td>{{q.latitude}}/{{q.longitude}}</td>
  </tr>
  <tr>
    <th>Depth</th>
    <td>{{q.depth}} m</td>
  </tr>
</table>
{{/let}}

{{outlet}}
